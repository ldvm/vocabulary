@prefix rdfs:  <http://www.w3.org/2000/01/rdf-schema#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix ldvm: <http://linked.opendata.cz/ontology/ldvm/> .

@prefix v-googlemaps-quantified-places: <http://linked.opendata.cz/ontology/ldvm/visualizer/googlemaps-quantified-places/> .
@prefix v-googlemaps-quantified-places-r: <http://linked.opendata.cz/resource/ldvm/visualizer/googlemaps-quantified-places/> .

v-googlemaps-quantified-places-r:GoogleMapsVisualizerTemplate a ldvm:VisualizerTemplate ;
    rdfs:label "GoogleMaps quantified places values visualizer"@en;
    rdfs:comment "Visualizes places with values and coordinates"@en;
    ldvm:componentConfigurationTemplate v-googlemaps-quantified-places-r:Configuration ;
    ldvm:inputTemplate v-googlemaps-quantified-places-r:Input ;
    ldvm:feature v-googlemaps-quantified-places-r:GoogleMapsFeature ;
    .

v-googlemaps-quantified-places:GoogleMapsVisualizerConfiguration a rdfs:Class ;
    rdfs:label "Google Maps quantified places Visualizer Configuration"@en;
    rdfs:subClassOf ldvm:ComponentConfiguration ;
    .

v-googlemaps-quantified-places-r:Configuration a v-googlemaps-quantified-places:GoogleMapsVisualizerConfiguration ;
    dcterms:title "Default Configuration" ;
    .

v-googlemaps-quantified-places-r:Input a ldvm:InputDataPortTemplate ;
    dcterms:title "Data described using RGML vocabulary" ;
    .

v-googlemaps-quantified-places-r:GoogleMapsFeature a ldvm:MandatoryFeature ;
    dcterms:title "GoogleMaps input descriptor" ;
    ldvm:descriptor v-googlemaps-quantified-places-r:GoogleMapsDescriptor ;
    .

v-googlemaps-quantified-places-r:GoogleMapsDescriptor a ldvm:Descriptor ;
    dcterms:title "GoogleMaps places with values presence check" ;
    ldvm:query """
        PREFIX s: <http://schema.org/>

		ASK {
  			?place s:geo ?geocoordinates ;
    			?hasQuantifiedAbstraction ?quantifiedAbstraction .
  
  			?geocoordinates s:longitude ?longitude ;
    			s:latitude ?latitude .
	
  			FILTER(ISNUMERIC(?quantifiedAbstraction))
		}
    """ ;
    ldvm:appliesTo v-googlemaps-quantified-places-r:Input ;
    .
